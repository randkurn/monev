<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="mizu.its.moe | mizu.is-a.dev" />
		<title>Performance Evaluation Form</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Playpen+Sans&display=swap"
			rel="stylesheet" />
		<link rel="stylesheet" href="./styles/style.css">
	</head>
	<body>
		    <!-- Success Modal -->
			<div id="successModal" class="modal">
				<div class="modal-content">
					<span class="close-modal" id="closeSuccessModal">&times;</span>
					<div class="modal-title">Berhasil!</div>
					<div class="modal-text">Terimakasih! Anda telah berhasil mengisi angket penilaian kepada kepala departemen Anda.</div>
					<button class="modal-btn" id="confirmSuccessBtn">Kembali ke Website Utama</button>
				</div>
			</div>
			
			<!-- Alert Modal -->
			<div id="alertModal" class="modal">
				<div class="modal-content">
					<span class="close-modal" id="closeAlertModal">&times;</span>
					<div class="modal-title">Perhatian</div>
					<div class="modal-text" id="alertModalText">Mohon lengkapi semua field yang diperlukan.</div>
					<button class="modal-btn" id="confirmAlertBtn">OK</button>
				</div>
			</div>
		<div class="container">
				<div class="profile box-color">
                    <div class="banner">
						<img
							loading="lazy"
							id="banner-image"
							src="./public/banner.gif"
							alt="" />
					</div>
					<div class="card box-color">
						<div class="name-box">
							<span class="display-name">Penilaian Staff Terhadap Kepala Departemen</span>
						</div>
								        <div class="body">
            <div class="content">
                <!-- Form starts here -->
                <form id="evaluationForm" action="https://docs.google.com/forms/d/e/1FAIpQLSf-usQm3cgoYkuW3Y183eEwX7aNP25J52c0Kh8XnYB5yX5XOQ/formResponse" method="post" target="hidden_iframe">
                    <div class="progress-bar">
                        <div class="progress-indicator" id="progressBar" style="width: 50%;"></div>
                    </div>
                    <div class="form-description">Kerahasiaan responden terjamin. Mohon isi dengan jujur dan sebenar-benarnya</div>
                    
                    <!-- Part 1 -->
                    <div id="part1">
                        <div class="part-indicator">
                            Bagian 1 dari 2
                        </div>
                        
                        <div class="form-section">
                            <div class="form-item">
                                <div class="form-item-title required">Nama Lengkap</div>
                                <input type="text" class="form-input" id="nama" name="entry.1799182697" placeholder="Masukkan nama lengkap anda" required>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Departemen</div>
                                <select class="form-input dropdown-select" id="departemen" name="entry.1547985899" required>
                                    <option value="" disabled selected>Pilih departemen anda</option>
                                    <option value="Sekretaris">Sekretaris</option>
                                    <option value="Bendahara">Bendahara</option>
                                    <option value="PSDM">PSDM</option>
                                    <option value="Kominfo">Kominfo</option>
                                    <option value="PSDO">PSDO</option>
                                    <option value="Keristek">Keristek</option>
                                    <option value="P2M">P2M</option>
                                    <option value="Kekraf">Kekraf</option>
                                    <option value="Sospol">Sospol</option>
                                    <option value="Adkesma">Adkesma</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Email</div>
                                <input type="text" class="form-input" id="email" name="entry.1409772012" placeholder="Masukkan email anda" required>
                            </div>
                            
                        </div>
                        
                        <div class="navigation">
                            <div></div>
                            <button type="button" class="btn btn-primary" id="nextBtn">Lanjutkan ke bagian berikut</button>
                        </div>
                    </div>
                    
                    <!-- Part 2 -->
                    <div id="part2">
                        <div class="part-indicator">
                            Bagian 2 dari 2
                        </div>
                        
                        <div class="form-section">
                            <div class="form-item">
                                <div class="form-item-title required">Seberapa baik kepala departemen dalam mendengarkan dan menindaklanjuti masukan dari anggota?</div>
                                <div class="card-container">
                                    <div class="card-content">
                                        <div class="card-title">Penilaian <span class="range-value" id="range-mendengarkan">1: Kurang Baik</span>
                                        </div>
                                        <div class="slider">
                                            <label class="label-min-value">1</label>
                                            <label class="label-min-value">2</label>
                                            <label class="label-max-value">3</label>  
                                            <label class="label-max-value">4</label>
                                        </div>
                                        <div class="rangeslider">
                                            <input class="min input-ranges" id="mendengarkan" name="entry.581641062" type="range" min="1" max="4" value="1" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Seberapa besar partisipasi kepala departemen mendorong kolaborasi antaranggota dalam menyelesaikan tugas?</div>
                                <div class="card-container">
                                    <div class="card-content">
                                        <div class="card-title">Penilaian <span class="range-value" id="range-kolaborasi">1: Kurang Baik</span>
                                        </div>
                                        <div class="slider">
                                            <label class="label-min-value">1</label>
                                            <label class="label-min-value">2</label>
                                            <label class="label-max-value">3</label>  
                                            <label class="label-max-value">4</label>
                                        </div>
                                        <div class="rangeslider">
                                            <input class="min input-ranges" id="kolaborasi" name="entry.432734104" type="range" min="1" max="4" value="1" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Seberapa baik kepala departemen dalam memastikan setiap anggota untuk bertanggung jawab terhadap tugas yang diberikan?</div>
                                <div class="card-container">
                                    <div class="card-content">
                                        <div class="card-title">Penilaian <span class="range-value" id="range-tanggung_jawab">1: Kurang Baik</span>
                                        </div>
                                        <div class="slider">
                                            <label class="label-min-value">1</label>
                                            <label class="label-min-value">2</label>
                                            <label class="label-max-value">3</label>  
                                            <label class="label-max-value">4</label>
                                        </div>
                                        <div class="rangeslider">
                                            <input class="min input-ranges" id="tanggung_jawab" name="entry.110038711" type="range" min="1" max="4" value="1" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Seberapa baik kepala departemen dalam menjaga keseimbangan antara fleksibilitas dan kedisiplinan dalam menjalankan tugas?</div>
                                <div class="card-container">
                                    <div class="card-content">
                                        <div class="card-title">Penilaian <span class="range-value" id="range-keseimbangan">1: Kurang Baik</span>
                                        </div>
                                        <div class="slider">
                                            <label class="label-min-value">1</label>
                                            <label class="label-min-value">2</label>
                                            <label class="label-max-value">3</label>  
                                            <label class="label-max-value">4</label>
                                        </div>
                                        <div class="rangeslider">
                                            <input class="min input-ranges" id="keseimbangan" name="entry.1000901958" type="range" min="1" max="4" value="1" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Seberapa baik kepala departemen memastikan program kerja berjalan dengan baik?</div>
                                <div class="card-container">
                                    <div class="card-content">
                                        <div class="card-title">Penilaian <span class="range-value" id="range-programkerja">1: Kurang Baik</span>
                                        </div>
                                        <div class="slider">
                                            <label class="label-min-value">1</label>
                                            <label class="label-min-value">2</label>
                                            <label class="label-max-value">3</label>  
                                            <label class="label-max-value">4</label>
                                        </div>
                                        <div class="rangeslider">
                                            <input class="min input-ranges" id="programkerja" name="entry.1852324618" type="range" min="1" max="4" value="1" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Apakah anda merasa nyaman berkomunikasi dengan kepala departemen anda?</div>
                                <div class="yes-no-group">
                                    <div class="yes-no-option">
                                        <input type="radio" name="entry.1403909915" id="nyaman_ya" value="YA" required>
                                        <label for="nyaman_ya">Ya</label>
                                    </div>
                                    <div class="yes-no-option">
                                        <input type="radio" name="entry.1403909915" id="nyaman_tidak" value="TIDAK">
                                        <label for="nyaman_tidak">Tidak</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Berdasarkan pertanyaan di atas, jika YA bagaimana komunikasi kalian? Jika TIDAK mengapa hal tersebut terjadi?</div>
                                <textarea class="form-input" name="entry.1983630373" placeholder="Jelaskan dengan detail" required></textarea>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-item-title required">Berikan saran dan masukan terhadap kepala departemen anda</div>
                                <textarea class="form-input" name="entry.397363330" placeholder="Berikan saran yang membangun" required></textarea>
                            </div>
                        </div>
                        
                        <div class="navigation">
                            <button type="button" class="btn btn-secondary" id="backBtn">Kembali</button>
                            <button type="submit" class="btn btn-primary" id="submitBtn">Kirim</button>
                        </div>
                    </div>
                </form>
                <!-- Hidden iframe for form submission -->
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const part1 = document.getElementById('part1');
            const part2 = document.getElementById('part2');
            const progressBar = document.getElementById('progressBar');
            const nextBtn = document.getElementById('nextBtn');
            const backBtn = document.getElementById('backBtn');
            const submitBtn = document.getElementById('submitBtn');
            const form = document.getElementById('evaluationForm');
            const hiddenIframe = document.getElementById('hidden_iframe');
            
            // Modal elements
            const successModal = document.getElementById('successModal');
            const alertModal = document.getElementById('alertModal');
            const alertModalText = document.getElementById('alertModalText');
            const closeSuccessModal = document.getElementById('closeSuccessModal');
            const closeAlertModal = document.getElementById('closeAlertModal');
            const confirmSuccessBtn = document.getElementById('confirmSuccessBtn');
            const confirmAlertBtn = document.getElementById('confirmAlertBtn');
            
            // Main website URL (replace with your actual website URL)
            const mainWebsiteUrl = window.location.href.split('?')[0];
            
            // Function to show alert modal
            function showAlert(message) {
                alertModalText.textContent = message;
                alertModal.style.display = 'flex';
            }
            
            // Function to show success modal
            function showSuccess() {
                successModal.style.display = 'flex';
            }
            
            // Close modals when X is clicked
            closeSuccessModal.addEventListener('click', function() {
                successModal.style.display = 'none';
                window.location.href = mainWebsiteUrl;
            });
            
            closeAlertModal.addEventListener('click', function() {
                alertModal.style.display = 'none';
            });
            
            // Confirm buttons for modals
            confirmSuccessBtn.addEventListener('click', function() {
                successModal.style.display = 'none';
                window.location.href = mainWebsiteUrl;
            });
            
            confirmAlertBtn.addEventListener('click', function() {
                alertModal.style.display = 'none';
            });
            
            // Next button functionality
            nextBtn.addEventListener('click', function() {
                // Check if all required fields in part 1 are filled
                const namaInput = document.getElementById('nama');
                const departemenInput = document.getElementById('departemen');
                const emailInput = document.getElementById('email');
                
                if (!namaInput.value) {
                    showAlert('Harap isi nama lengkap Anda');
                    return;
                }
                
                if (!departemenInput.value) {
                    showAlert('Harap pilih departemen Anda');
                    return;
                }
                
                if (!emailInput.value) {
                    showAlert('Harap isi email Anda');
                    return;
                }
                
                
                part1.style.display = 'none';
                part2.style.display = 'block';
                progressBar.style.width = '100%';
            });
            
            // Back button functionality
            backBtn.addEventListener('click', function() {
                part1.style.display = 'block';
                part2.style.display = 'none';
                progressBar.style.width = '50%';
            });
            
            // Form submission
            form.addEventListener('submit', function(e) {
                // Check if all required fields are filled
                const requiredFields = form.querySelectorAll('[required]');
                let allFilled = true;
                
                requiredFields.forEach(field => {
                    if (!field.value) {
                        allFilled = false;
                    }
                });
                
                const radioButtons = form.querySelectorAll('input[type="radio"][name="entry.1403909915"]');
                const isRadioSelected = Array.from(radioButtons).some(radio => radio.checked);
                
                if (!allFilled || !isRadioSelected) {
                    showAlert('Harap isi semua field yang diperlukan');
                    e.preventDefault();
                    return;
                }
            });
            
            // Handle successful submission via hidden iframe
            hiddenIframe.addEventListener('load', function() {
                if (form.classList.contains('submitted')) {
                    showSuccess();
                }
            });
            
            form.addEventListener('submit', function() {
                if (this.checkValidity()) {
                    form.classList.add('submitted');
                    // Set a timeout to show success in case iframe doesn't trigger
                    setTimeout(function() {
                        showSuccess();
                    }, 2000);
                }
            });
            
            // Slider functionality
            const sliders = document.querySelectorAll(".input-ranges");
            
            sliders.forEach((slider) => {
                const rangeText = document.querySelector(`#range-${slider.id}`);
                
                slider.addEventListener("input", function () {
                    const value = slider.value;
                    let text = "";
                    
                    switch (value) {
                        case "1":
                            text = "1: Kurang Baik";
                            break;
                        case "2":
                            text = "2: Cukup Baik";
                            break;
                        case "3":
                            text = "3: Baik";
                            break;
                        case "4":
                            text = "4: Sangat Baik";
                            break;
                    }
                    
                    rangeText.textContent = text;
                });
            });
        });
    </script>
	</body>
</html>
